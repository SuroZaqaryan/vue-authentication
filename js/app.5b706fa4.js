(function(){"use strict";var e={6936:function(e,r,t){t(7658);var a=t(6369),n=function(){var e=this,r=e._self._c;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],o={name:"App"},i=o,u=t(3736),l=(0,u.Z)(i,n,s,!1,null,null,null),m=l.exports,p=t(3822),c=t(70);const f={async Register({dispatch:e},r){await c.ZP.post("register",r);let t=new FormData;t.append("username",r.username),t.append("password",r.password),await e("LogIn",t)},async LogIn({commit:e},r){await c.ZP.post("login",r),await e("setUser",r.get("username"))},async LogOut({commit:e}){e("logout")}},d={setUser(e,r){localStorage.setItem("username",r),console.log(e)},logout(){localStorage.removeItem("username")}};var v={actions:f,mutations:d};a.ZP.use(p.ZP);var g=new p.ZP.Store({modules:{auth:v}}),h=t(2631),_=function(){var e=this,r=e._self._c;return r("div",{staticClass:"form-wrapper register"},[r("form",{on:{submit:function(r){return r.preventDefault(),e.register.apply(null,arguments)}}},[e._m(0),r("div",{staticClass:"login__fields"},[r("label",{attrs:{for:"username"}},[e._v("Username")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"username",id:"username",name:"username",placeholder:"Username",maxlength:"30",required:""},domProps:{value:e.form.username},on:{input:function(r){r.target.composing||e.$set(e.form,"username",r.target.value)}}}),r("br"),r("br"),r("label",{attrs:{for:"fullname"}},[e._v("Full Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.full_name,expression:"form.full_name"}],attrs:{type:"fullname",id:"fullname",name:"fullname",placeholder:"Full Name",maxlength:"30",required:""},domProps:{value:e.form.full_name},on:{input:function(r){r.target.composing||e.$set(e.form,"full_name",r.target.value)}}}),r("br"),r("br"),r("label",{attrs:{for:"Password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",id:"Password",name:"password",placeholder:"Password",autocomplete:"on",maxlength:"25",required:""},domProps:{value:e.form.password},on:{input:function(r){r.target.composing||e.$set(e.form,"password",r.target.value)}}}),r("input",{attrs:{type:"submit",value:"Register"}})])]),r("div",{staticClass:"login__registered"},[e._m(1),r("router-link",{attrs:{tag:"button",to:"/login"}},[e._v("Login to your account")])],1),e._m(2)])},w=[function(){var e=this,r=e._self._c;return r("div",{staticClass:"login__title"},[r("h1",[e._v("Registration")])])},function(){var e=this,r=e._self._c;return r("p",[r("span",[e._v("Already have an account?")])])},function(){var e=this,r=e._self._c;return r("div",{staticClass:"login__error"},[r("span",[e._v("Username already exists")])])}],b={data(){return{form:{username:"",full_name:"",password:""},errorMessage:!1}},methods:{async register(){let e=JSON.parse(JSON.stringify(this.form));try{await this.$store.dispatch("Register",e),this.$router.push("/profile"),this.errorMessage=!1}catch(r){this.errorMessage=!0}}}},y=b,P=(0,u.Z)(y,_,w,!1,null,"5eaef106",null),x=P.exports,C=function(){var e=this,r=e._self._c;return r("div",{staticClass:"form-wrapper login"},[r("form",{on:{submit:function(r){return r.preventDefault(),e.login.apply(null,arguments)}}},[r("div",{staticClass:"login__title"},[r("h1",[e._v("Authentication")]),r("h3",[e._v("Welcome to our application")]),r("p",[e._v(" New here? "),r("router-link",{attrs:{tag:"span",to:"/register"}},[e._v("Create an account")])],1)]),r("div",{staticClass:"login__fields"},[r("label",{attrs:{for:"name"}},[e._v("Username")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"name",id:"name",name:"name",placeholder:"Username",maxlength:"30",required:""},domProps:{value:e.form.username},on:{input:function(r){r.target.composing||e.$set(e.form,"username",r.target.value)}}}),r("br"),r("br"),r("label",{attrs:{for:"Password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",id:"Password",name:"password",placeholder:"Password",autocomplete:"on",maxlength:"25",required:""},domProps:{value:e.form.password},on:{input:function(r){r.target.composing||e.$set(e.form,"password",r.target.value)}}}),r("input",{attrs:{type:"submit",value:"Sign in"}})])]),r("div",{staticClass:"login__registered"},[e._m(0),r("router-link",{attrs:{tag:"button",to:"/register"}},[e._v("No account yet?")])],1),e.errorMessage?r("div",{staticClass:"login__error"},[r("span",[e._v("Username or Password is incorrect")])]):e._e()])},Z=[function(){var e=this,r=e._self._c;return r("p",[r("span",[e._v("or register")])])}],O={name:"LoginUser",data(){return{form:{username:"",password:""},errorMessage:!1}},methods:{async login(){const e=new FormData;e.append("username",this.form.username),e.append("password",this.form.password);try{await this.$store.dispatch("LogIn",e),this.$router.push("/profile"),this.errorMessage=!1}catch(r){this.errorMessage=!0}}}},$=O,N=(0,u.Z)($,C,Z,!1,null,"be7ac930",null),U=N.exports,k=function(){var e=this,r=e._self._c;return r("div",[r("header",[e._m(0),r("nav",[r("ul",[r("li",[e._v(e._s(e.username))]),r("li",{on:{click:e.logout}},[e._v("Logout")])])])]),r("main",{staticClass:"user__data"},[r("section",[r("div",{staticClass:"user__info"},[r("p",[e._v("User name:")]),r("p",[e._v(e._s(e.username))])])])])])},L=[function(){var e=this,r=e._self._c;return r("div",{staticClass:"header__title"},[r("h2",[e._v("Profile")])])}],M={data(){return{username:""}},mounted(){this.username=localStorage.getItem("username")},methods:{async logout(){await this.$store.dispatch("LogOut"),this.$router.push("/login")}}},S=M,j=(0,u.Z)(S,k,L,!1,null,"4555df74",null),I=j.exports;a.ZP.use(h.Z);var q=new h.Z({mode:"history",routes:[{path:"/",redirect:{name:"login"}},{path:"/register",name:"register",component:x},{path:"/profile",name:"profile",component:I},{path:"/login",name:"login",component:U}]});c.ZP.defaults.withCredentials=!0,c.ZP.defaults.baseURL="https://gabbyblog.herokuapp.com/",c.ZP.interceptors.response.use(void 0,(function(e){if(e){const r=e.config;if(401===e.response.status&&!r._retry)return r._retry=!0,g.dispatch("LogOut"),q.push("/login")}})),a.ZP.config.productionTip=!1,new a.ZP({store:g,router:q,render:e=>e(m)}).$mount("#app")}},r={};function t(a){var n=r[a];if(void 0!==n)return n.exports;var s=r[a]={exports:{}};return e[a](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(r,a,n,s){if(!a){var o=1/0;for(m=0;m<e.length;m++){a=e[m][0],n=e[m][1],s=e[m][2];for(var i=!0,u=0;u<a.length;u++)(!1&s||o>=s)&&Object.keys(t.O).every((function(e){return t.O[e](a[u])}))?a.splice(u--,1):(i=!1,s<o&&(o=s));if(i){e.splice(m--,1);var l=n();void 0!==l&&(r=l)}}return r}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[a,n,s]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var a in r)t.o(r,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,a){var n,s,o=a[0],i=a[1],u=a[2],l=0;if(o.some((function(r){return 0!==e[r]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(u)var m=u(t)}for(r&&r(a);l<o.length;l++)s=o[l],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(m)},a=self["webpackChunkvue_authentication"]=self["webpackChunkvue_authentication"]||[];a.forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(6936)}));a=t.O(a)})();
//# sourceMappingURL=app.5b706fa4.js.map